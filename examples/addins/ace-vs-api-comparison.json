{
  "name": "Ace vs API Comparison",
  "supportEmail": "https://github.com/fhoffa/geotab-vibe-guide",
  "version": "1.0",
  "items": [{
    "url": "page.html",
    "path": "ActivityLink",
    "menuName": { "en": "Ace vs API Comparison" }
  }],
  "files": {
    "page.html": "<!DOCTYPE html><html><head><meta charset='utf-8'><title>Ace vs API Comparison</title></head><body style='padding:20px;font-family:system-ui,-apple-system,sans-serif;background:#0f172a;color:#e2e8f0;max-width:1200px;margin:0 auto;'><h1 style='color:#38bdf8;margin-bottom:8px;'>Ace vs Direct API Comparison</h1><p style='color:#94a3b8;margin-top:0;'>Demonstrates when to use each approach for fleet data queries</p><div style='display:flex;gap:20px;margin-top:20px;'><div style='flex:1;background:#1e293b;padding:20px;border-radius:12px;border:1px solid #334155;'><div style='display:flex;align-items:center;gap:10px;margin-bottom:15px;'><span style='width:12px;height:12px;background:#22c55e;border-radius:50%;'></span><h2 style='margin:0;color:#22c55e;font-size:18px;'>Direct API (Real-time)</h2></div><div style='color:#94a3b8;font-size:14px;margin-bottom:10px;'>Best for: Simple lookups, current data, writes</div><div id='api-status' style='padding:10px;background:#0f172a;border-radius:6px;margin-bottom:10px;'>Waiting to start...</div><div id='api-time' style='font-size:24px;font-weight:bold;color:#22c55e;margin-bottom:10px;'>--</div><pre id='api-result' style='background:#0f172a;padding:15px;border-radius:6px;overflow:auto;max-height:250px;font-size:12px;margin:0;'></pre></div><div style='flex:1;background:#1e293b;padding:20px;border-radius:12px;border:1px solid #334155;'><div style='display:flex;align-items:center;gap:10px;margin-bottom:15px;'><span style='width:12px;height:12px;background:#eab308;border-radius:50%;'></span><h2 style='margin:0;color:#eab308;font-size:18px;'>Ace AI (Historical Analysis)</h2></div><div style='color:#94a3b8;font-size:14px;margin-bottom:10px;'>Best for: Complex questions, trends, insights</div><div id='ace-status' style='padding:10px;background:#0f172a;border-radius:6px;margin-bottom:10px;'>Waiting to start...</div><div id='ace-time' style='font-size:24px;font-weight:bold;color:#eab308;margin-bottom:10px;'>--</div><pre id='ace-result' style='background:#0f172a;padding:15px;border-radius:6px;overflow:auto;max-height:250px;font-size:12px;margin:0;'></pre></div></div><div style='margin-top:20px;background:#1e293b;padding:15px;border-radius:12px;border:1px solid #334155;'><h3 style='margin:0 0 10px 0;color:#38bdf8;font-size:14px;'>Activity Log</h3><div id='log' style='background:#0f172a;padding:10px;border-radius:6px;max-height:150px;overflow:auto;font-size:11px;font-family:monospace;'></div></div><div style='margin-top:20px;background:#1e3a5f;padding:15px;border-radius:12px;border:1px solid #2563eb;'><h3 style='margin:0 0 10px 0;color:#60a5fa;font-size:14px;'>Key Takeaways</h3><ul style='margin:0;padding-left:20px;color:#94a3b8;font-size:13px;'><li><strong style='color:#22c55e;'>Direct API</strong>: ~300-500ms for simple queries (device list, current status)</li><li><strong style='color:#eab308;'>Ace AI</strong>: ~30-90 seconds but provides AI-powered analysis and insights</li><li>Use API for real-time data and write operations</li><li>Use Ace for complex questions like \"top performers\" or \"efficiency trends\"</li></ul></div><script>function log(msg){var d=document.getElementById('log');var t=new Date().toLocaleTimeString();d.innerHTML='<div style=\"color:#64748b;\">['+t+'] '+msg+'</div>'+d.innerHTML;}function getAceData(r){if(r&&r.apiResult&&r.apiResult.results){return r.apiResult.results[0]||{};}return r||{};}geotab.addin['ace-api-comparison']=function(){return{initialize:function(api,state,callback){log('Starting comparison test...');var apiStart=Date.now();document.getElementById('api-status').innerHTML='<span style=\"color:#38bdf8;\">Fetching devices...</span>';api.call('Get',{typeName:'Device'},function(devices){var apiTime=Date.now()-apiStart;document.getElementById('api-status').innerHTML='<span style=\"color:#22c55e;\">✓ Complete</span>';document.getElementById('api-time').textContent=apiTime+'ms';var summary={totalVehicles:devices.length,sampleNames:devices.slice(0,5).map(function(d){return d.name;})};document.getElementById('api-result').textContent=JSON.stringify(summary,null,2);log('API complete: '+devices.length+' devices in '+apiTime+'ms');},function(e){document.getElementById('api-status').innerHTML='<span style=\"color:#ef4444;\">✗ Error</span>';log('API error: '+JSON.stringify(e));});var aceStart=Date.now();var aceQuestion='How many vehicles are in my fleet? List the top 5 by name.';document.getElementById('ace-status').innerHTML='<span style=\"color:#38bdf8;\">Creating chat session...</span>';log('Ace question: \"'+aceQuestion+'\"');api.call('GetAceResults',{serviceName:'dna-planet-orchestration',functionName:'create-chat',functionParameters:{}},function(r){var data=getAceData(r);var chatId=data.chat_id;if(!chatId){document.getElementById('ace-status').innerHTML='<span style=\"color:#ef4444;\">✗ No chat_id</span>';return;}log('Chat created: '+chatId.substring(0,8)+'...');document.getElementById('ace-status').innerHTML='<span style=\"color:#38bdf8;\">Sending question...</span>';api.call('GetAceResults',{serviceName:'dna-planet-orchestration',functionName:'send-prompt',functionParameters:{chat_id:chatId,prompt:aceQuestion}},function(r2){var data2=getAceData(r2);var mgId=data2.message_group_id||((data2.message_group||{}).id);if(!mgId){document.getElementById('ace-status').innerHTML='<span style=\"color:#ef4444;\">✗ No message_group_id</span>';return;}log('Question sent, waiting 10s before polling...');document.getElementById('ace-status').innerHTML='<span style=\"color:#eab308;\">Processing (waiting 10s)...</span>';setTimeout(function(){pollAce(api,chatId,mgId,aceStart,0);},10000);},function(e){log('send-prompt error');});},function(e){log('create-chat error');});callback();},focus:function(){},blur:function(){}};};function pollAce(api,chatId,mgId,startTime,attempt){if(attempt>15){document.getElementById('ace-status').innerHTML='<span style=\"color:#ef4444;\">✗ Timeout after 2 min</span>';return;}var elapsed=Math.round((Date.now()-startTime)/1000);document.getElementById('ace-status').innerHTML='<span style=\"color:#eab308;\">Processing... ('+elapsed+'s, poll #'+(attempt+1)+')</span>';log('Polling attempt '+(attempt+1));api.call('GetAceResults',{serviceName:'dna-planet-orchestration',functionName:'get-message-group',functionParameters:{chat_id:chatId,message_group_id:mgId}},function(r){var data=getAceData(r);var mg=data.message_group||{};var st=mg.status?mg.status.status:'UNKNOWN';if(st==='DONE'){var aceTime=Date.now()-startTime;document.getElementById('ace-status').innerHTML='<span style=\"color:#22c55e;\">✓ Complete</span>';document.getElementById('ace-time').textContent=Math.round(aceTime/1000)+'s ('+aceTime+'ms)';var msgs=mg.messages||{};var result={};Object.keys(msgs).forEach(function(k){var m=msgs[k];if(m.preview_array){result.data=m.preview_array;result.reasoning=(m.reasoning||'').substring(0,200)+'...';}});document.getElementById('ace-result').textContent=JSON.stringify(result,null,2);log('Ace complete in '+Math.round(aceTime/1000)+'s');var apiTimeEl=document.getElementById('api-time').textContent;log('COMPARISON: API='+apiTimeEl+' vs Ace='+Math.round(aceTime/1000)+'s');}else if(st==='FAILED'){document.getElementById('ace-status').innerHTML='<span style=\"color:#ef4444;\">✗ Query failed</span>';}else{setTimeout(function(){pollAce(api,chatId,mgId,startTime,attempt+1);},8000);}},function(e){setTimeout(function(){pollAce(api,chatId,mgId,startTime,attempt+1);},8000);});}console.log('Ace vs API Comparison Add-In registered');</script></body></html>"
  }
}
